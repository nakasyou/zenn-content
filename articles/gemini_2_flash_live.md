---
title: "Gemini 2.0 Flash Live API è¶…è§£èª¬" # è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
emoji: "ğŸ—£ï¸" # ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹çµµæ–‡å­—ï¼ˆ1æ–‡å­—ã ã‘ï¼‰
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ["gemini", "websocket"] # ã‚¿ã‚°ã€‚["markdown", "rust", "aws"]ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: false # å…¬é–‹è¨­å®šï¼ˆfalseã«ã™ã‚‹ã¨ä¸‹æ›¸ãï¼‰
---

Gemini 2.0 Flash ã‚„ã°ã„ã§ã™ã‚ˆã­ã€‚ãã®ç›®ç‰æ©Ÿèƒ½ã®ä¸€ã¤ã«ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®éŸ³å£°å‹•ç”»é€šä¿¡ãŒã‚ã‚Šã¾ã™ã€‚å‹•ç”»ã¨éŸ³å£°ã§ LLM ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±ã§ãã‚‹ã®ã§ã™ï¼
ãã® API ã§ã‚ã‚‹ Multimodal Live API ãŒã‚ã‚‹ã®ã§ã™ãŒã€ã“ã‚ŒãŒã¨ã¦ã‚‚æƒ…å ±é‡ãŒå°‘ãªã„ã®ã§ã€è§£èª¬ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

Python ã® SDK ã—ã‹æä¾›ã•ã‚Œã¦ã„ãªã„ã®ã§ã€JavaScript å¤§å¥½ã nakasyou ã¨ã—ã¦ã¯ JavaScript ã§ä½¿ã„ãŸããªã£ãŸã®ã§ã€ã‚³ãƒ¼ãƒ‰ãªã©ã‹ã‚‰èª¿ã¹ã¾ã—ãŸã€‚

## æ¦‚è¦

## Multimodal Live API ã£ã¦ã©ã‚“ãªã®

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§éŸ³å£°ã¨å‹•ç”»ã§é€šä¿¡ã§ãã‚‹ã‚„ã¤ã§ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
å¾“æ¥ã® LLM ã¯ã€1ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¯¾ã—ã¦1ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãªã®ã¯ã‚ã‹ã‚Šã¾ã™ã‚ˆã­ã€‚ãã‚Œã«å¯¾ã—ã¦ã€Live Streaming ã§ã¯ã€é€šå¸¸ã®ä¼šè©±ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ãƒ¢ãƒ‡ãƒ«ãŒä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã•ã‚‰ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ†ã‚­ã‚¹ãƒˆã ã‘ã§ã¯ãªãã€éŸ³å£°ã‚„å‹•ç”»ã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã‚«ãƒ¡ãƒ©ã‚’çŸ¥ã‚‰ãªã„èŠ±ã«ã‹ã–ã—ã¦ã€Œã“ã®èŠ±ã®åå‰ã¯ï¼Ÿã€ã®ã‚ˆã†ã«å£ã§èãã“ã¨ãŒã§ãã¾ã™ã€‚
ã¾ãŸã€ãƒ¢ãƒ‡ãƒ«ã¯ãƒ†ã‚­ã‚¹ãƒˆã ã‘ã§ãªãéŸ³å£°ã§å¿œç­”ã§ãã¾ã™ã€‚ã€Œã“ã‚“ã«ã¡ã¯ã€ã¨éŸ³å£°ã§è©±ã™ã¨ã€Œã“ã‚“ã«ã¡ã¯ã€ã¨éŸ³å£°ã§è¿”ã—ã¦ãã‚ŒãŸã‚Šã—ã¾ã™ã€‚

## é€šä¿¡æ–¹æ³•

å¾“æ¥ã® LLM API ã¯ã€é€šä¿¡ã®ãŸã‚ã« HTTP Streaming ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã¯ä¸€æ–¹å‘ã®æƒ…å ±ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’å¯èƒ½ã«ã™ã‚‹æŠ€è¡“ã§ã™ã€‚ChatGPT ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ã™ã‚‰ã™ã‚‰ã¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ HTTP Streaming ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚
API ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ã‚‹ã¨ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒé–‹å§‹ã•ã‚Œã€ä¸€æ–¹å‘ã«çµæœãŒå‡ºåŠ›ã•ã‚Œã‚‹ã¨ã„ã†å…·åˆã§ã™ã€‚

ä¸€æ–¹ã€Gemini 2.0 Flash ã® Multimodal Live API ã¯ã€WebSocket ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ WebSocket ã¯ã€åŒæ–¹å‘ã®é€šä¿¡ã‚’å¯èƒ½ã«ã™ã‚‹æŠ€è¡“ã§ã™ã€‚
å¾“æ¥ã® LLM API ã¯ã€æœ€åˆã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ã‚‹ã ã‘ãªã®ã§ã€HTTP Streaming ã§ååˆ†ã§ã—ãŸãŒã€Multimodal Live API ã¯ã€ãã‚Œã ã‘ã§ã¯è¶³ã‚Šã¾ã›ã‚“ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚
ä¾‹ãˆã°ã€Gemini ã®èª¬æ˜ã‚’èã„ã¦ã„ã‚‹ã¨ãã«ã€ã€Œã‚„ã£ã±ã‚Šèª¬æ˜ã‚’ã‚„ã‚ã¦ã€ã¿ãŸã„ãªã“ã¨ãŒã§ãã‚‹ã‚ã‘ã§ã™ã€‚ã“ã‚Œã«ã¯åŒæ–¹å‘é€šä¿¡ã‚’ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã€ WebSocket ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã§ã™

## API ã®ä½¿ã„æ–¹

TypeScript ã§ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚

### æ¥ç¶š

WebSocket ã«æ¥ç¶šã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã™:
```ts
const ws = new WebSocket('wss://generativelanguage.googleapis.com/ws/google.ai.generativelanguage.v1alpha.GenerativeService.BidiGenerateContent?key=apiKey')
```
ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ã€
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ `wss://generativelanguage.googleapis.com/ws/google.ai.generativelanguage.v1alpha.GenerativeService.BidiGenerateContent`
- API Key ã¯ `key` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§æŒ‡å®šã™ã‚‹

ã¨ã„ã£ãŸã¨ã“ã‚ã§ã™ã€‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

generationConfig ã‚„ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ã©ã†ã‚„ã£ã¦æŒ‡å®šã™ã‚‹ã‚“ã ã¨æ€ã£ãŸãã“ã®ã‚ãªãŸã€‚JSON å½¢å¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚Šã¾ã™ã€‚

```ts
ws.send(JSON.stringify({
  setup: {
    // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç”¨ã®ãƒ‡ãƒ¼ã‚¿
  }
}))
```
ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ä½•ãŒæŒ‡å®šã§ãã‚‹ã‹ã¯å‹å®šç¾©ã¨ã—ã¦ä»¥ä¸‹ã«ç½®ã„ã¦ãŠãã¾ã™ã€‚
```ts
import type { Tool, Content } from '@google/generative-ai' // ã‚‚ã¨ã‚‚ã¨ã‚ã‚‹å‹

// ã“ã„ã¤ã‚’æŒ‡å®šã™ã‚‹
export interface Setup {
  // models/gemini-2.0-flash-exp ã¿ãŸã„ã«ã€å¿…é ˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  model: `models/${string}`

  // æ™®é€šã¨ã¡ã‚‡ã£ã¨é•ã† GenerationConfig ã§ã™ã€‚
  generationConfig?: LiveGenerationConfig

  // ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€‚
  systemInstruction?: Content

  // ãƒ„ãƒ¼ãƒ«ã€‚Function Calling ã¨ã‹ä½¿ãˆã‚‹
  tools?: Tool[]
}

export interface LiveGenerationConfig extends GenerationConfig {
  // ã“ã‚Œã‚‰ã®å‹ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãªã„
  responseLogprobs?: never
  responseMimeType?: never
  logprobs?: never
  responseSchema?: never
  stopSequences?: never

  // é‡è¦ãªã®ã§å¾Œã§èª¬æ˜
  responseModalities?: ("TEXT" | "IMAGE" | "AUDIO">)[]

  // å£°ã¨ã‹å¤‰æ›´ã§ãã‚‹
  speechConfig?: LiveSpeechConfig
}

 export interface LiveSpeechConfig {
   voiceConfig?: {
     prebuiltVoiceConfig?: {
       voiceName?: string // å¤‰æ›´ã—ãŸã„å£°ã®åå‰
     }
   }
 }
```
